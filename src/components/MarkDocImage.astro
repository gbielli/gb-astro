---
// src/components/MdxImage.astro

interface Props {
  src: string;
  alt: string;
  title?: string;
  loading?: "eager" | "lazy";
}

const { src, alt, title, loading = "lazy" } = Astro.props;

// Modifier le chemin pour ajouter le / au début si nécessaire
const imagePath = src.startsWith('/') ? src : `/${src}`;
const isRemoteImage = src.startsWith('http');
---

{isRemoteImage ? (
  <img
    src={src}
    alt={alt}
    title={title}
    loading="lazy"
    decoding="async"
    class="rounded-lg w-full shadow-sm"
  />
) : (
  <img
    src={imagePath}
    alt={alt}
    title={title}
    loading="lazy"
    decoding="async"
    class="rounded-lg w-full shadow-sm"
  />
)}